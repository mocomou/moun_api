require 'jwt'

token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InVISDREOHF3WDN1NmpkS0I1em9uQiJ9.eyJpc3MiOiJodHRwczovL2Rldi13ZWo2anZrby51cy5hdXRoMC5jb20vIiwic3ViIjoiYXV0aDB8NjFiNzJlYzJjNWEwOTgwMDZiZmVmZDU1IiwiYXVkIjpbImh0dHBzOi8vZGV2LXdlajZqdmtvLnVzLmF1dGgwLmNvbS9hcGkvdjIvIiwiaHR0cHM6Ly9kZXYtd2VqNmp2a28udXMuYXV0aDAuY29tL3VzZXJpbmZvIl0sImlhdCI6MTYzOTQ4MzY4MSwiZXhwIjoxNjM5NDkwODgxLCJhenAiOiJPcnFkTkRrdVF2RHlHSUdlM2pIRGlac2VsT2g0d3RYUyIsInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwifQ.vwQY9EX1nd_jvTF7pSKvbkWb4mFMLNq5rCpHn5wDNHMvRkURmhHFBYND3EFf1NyDyLlyJmLS9OAbbXy7_olchBWf0bke_mphP5n8ewFCURK2CQ3uL0_lN4UrThoi9ZyfA99OcOTmEvWBUx5dYSSt_J-Rv6fjgfHVrhzGM_WxCVUxQxAw-eDm9QF0IQOKt75GriPXZm2Wep6XaqQG5uX6dFR_Zfu0WqHfahb60pUZdHSN9fIgnC2CeZ1qb3AOzyXyMX27CBGblpFWtOQT5f50cLhJYiMM3ccQmckRoQM_eXGTBSzaB-ceF6zTlZvgBPrlE7h3WPjl8x9sY8AJq-X_Xg'
# puts token
decoded_token = JWT.decode token, nil, false
puts decoded_token
post.sub = decoded_token[0]['sub']